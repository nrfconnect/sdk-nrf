# nRF9151 Serial Modem (SM) configuration
# This overlay enables PPP connectivity through a Serial Modem

# UART configuration
CONFIG_UART_ASYNC_API=y
CONFIG_UART_1_ASYNC=y
CONFIG_UART_1_INTERRUPT_DRIVEN=n

# Modem CMUX configuration (aligned with SM application)
CONFIG_MODEM_CMUX_MTU=127
CONFIG_MODEM_CMUX_WORK_BUFFER_SIZE_EXTRA=2048
CONFIG_MODEM_CELLULAR_UART_BUFFER_SIZES=6000

# Modem driver
CONFIG_MODEM=y
CONFIG_MODEM_CELLULAR=y
CONFIG_MODEM_CELLULAR_PERIODIC_SCRIPT_MS=20000
CONFIG_MODEM_BACKEND_UART_ASYNC=y
CONFIG_MODEM_BACKEND_UART_ASYNC_HWFC=y
CONFIG_MODEM_AT_SHELL=n
CONFIG_MODEM_STATS=y

# Power management
CONFIG_PM_DEVICE=y
CONFIG_PM_DEVICE_RUNTIME=y
CONFIG_PM_DEVICE_RUNTIME_USE_DEDICATED_WQ=y
CONFIG_PM_DEVICE_SHELL=y

# Networking
CONFIG_NETWORKING=y
CONFIG_NET_NATIVE=y
CONFIG_NET_L2_PPP=y
CONFIG_NET_UDP=y
CONFIG_NET_SOCKETS=y
CONFIG_NET_CONTEXT_RCVTIMEO=y
CONFIG_NET_SOCKETS_OFFLOAD=n

# Network shell
CONFIG_NET_SHELL=y
CONFIG_NET_STATISTICS_USER_API=y

# Network management
CONFIG_NET_MGMT=y
CONFIG_NET_MGMT_EVENT=y
CONFIG_NET_CONNECTION_MANAGER=y

# DNS (using PPP DNS option)
CONFIG_DNS_RESOLVER=y
CONFIG_NET_L2_PPP_OPTION_DNS_USE=y

# Shell
CONFIG_SHELL=y

# Logging
CONFIG_LOG=y
CONFIG_LOG_BACKEND_UART=y
CONFIG_MODEM_MODULES_LOG_LEVEL_INF=y
CONFIG_MODEM_LOG_LEVEL_INF=y
