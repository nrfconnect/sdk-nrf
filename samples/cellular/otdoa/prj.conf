CONFIG_NRF_MODEM_LIB=y

# Modem info
CONFIG_MODEM_INFO=y
CONFIG_MODEM_INFO_ADD_DATE_TIME=y

CONFIG_NETWORKING=y
CONFIG_NET_SOCKETS=y
CONFIG_NET_NATIVE=n
CONFIG_POSIX_API=y

# LTE link control (for OTDOA sample application)
CONFIG_LTE_LINK_CONTROL=y


CONFIG_MAIN_STACK_SIZE=2048
CONFIG_SHELL_STACK_SIZE=2048

CONFIG_HEAP_MEM_POOL_SIZE=2048

CONFIG_MODEM_KEY_MGMT=y

# Added after update to ncs/nrf folder in 10 May 2021 release from Nordic
CONFIG_FPU=y
CONFIG_FPU_SHARING=y

# floating point prints:
CONFIG_NEWLIB_LIBC_FLOAT_PRINTF=y
CONFIG_NEWLIB_LIBC_FLOAT_SCANF=y

# Serial Port
CONFIG_NRFX_UARTE0=y
CONFIG_NRFX_UARTE1=n
CONFIG_NRFX_UARTE2=n
CONFIG_NRFX_UARTE3=n

CONFIG_UART_INTERRUPT_DRIVEN=y
CONFIG_UART_LINE_CTRL=y
CONFIG_UART_0_NRF_TX_BUFFER_SIZE=256

# add for math libraries
CONFIG_NEWLIB_LIBC=y

# Add the Zephyr shell
CONFIG_PRINTK=y
CONFIG_SHELL=y
CONFIG_INIT_STACKS=y
CONFIG_THREAD_STACK_INFO=y
CONFIG_KERNEL_SHELL=y
CONFIG_THREAD_MONITOR=y
CONFIG_BOOT_BANNER=n
CONFIG_THREAD_NAME=y
CONFIG_DEVICE_SHELL=y
CONFIG_DATE_SHELL=y
CONFIG_THREAD_RUNTIME_STATS=y
CONFIG_SHELL_PROMPT_UART="otdoa:~$ "
CONFIG_AT_SHELL=y
CONFIG_FILE_SYSTEM_SHELL=y
# disable wildcards in the shell so commands like AT+CFUN? will not interpret the ? as a wildcard
CONFIG_SHELL_WILDCARD=n
# the default of 64 isn't enough for an EC key
CONFIG_SHELL_BACKEND_SERIAL_RX_RING_BUFFER_SIZE=128

#--------------------------------------------------
# for Nordic integration
# reduce SHMEM size to save memory.  Based on experimental values: CONFIG_NRF_MODEM_LIB_SHMEM_RX_SIZE=16384
CONFIG_NRF_MODEM_LIB_SHMEM_RX_SIZE=6144

# debugging
CONFIG_ASSERT=y
CONFIG_ASSERT_VERBOSE=y

CONFIG_RESET_ON_FATAL_ERROR=n
CONFIG_EXTRA_EXCEPTION_INFO=y
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048


CONFIG_GPIO=y
CONFIG_SERIAL=y
CONFIG_ARM_MPU=y
CONFIG_ARM_TRUSTZONE_M=y
CONFIG_TRUSTED_EXECUTION_NONSECURE=y
CONFIG_HW_STACK_PROTECTION=y
CONFIG_CONSOLE=y
CONFIG_UART_CONSOLE=y

CONFIG_FLASH=y
CONFIG_FLASH_MAP=y
CONFIG_FLASH_PAGE_LAYOUT=y
CONFIG_FILE_SYSTEM=y
CONFIG_FILE_SYSTEM_LITTLEFS=y
CONFIG_PM_PARTITION_SIZE_LITTLEFS=0x10000

# ncs v2.8.0 experiment
CONFIG_SPI=y
CONFIG_SPI_NOR=y
CONFIG_SPI_NOR_FLASH_LAYOUT_PAGE_SIZE=4096

# Logging
CONFIG_LOG=y
CONFIG_LOG_MODE_DEFERRED=y
CONFIG_LOG_RUNTIME_FILTERING=y
CONFIG_LOG_BUFFER_SIZE=8192
CONFIG_LOG_PRINTK=y
# 64b timestamps to allow longer uptime logs without wrapping
CONFIG_LOG_TIMESTAMP_64BIT=y

# Log thread configuration
CONFIG_LOG_PROCESS_THREAD=y
CONFIG_LOG_PROCESS_THREAD_SLEEP_MS=100
CONFIG_LOG_PROCESS_THREAD_STACK_SIZE=1536

# Disable logging of FS errors, since the FS library
# logs an error if a file does not exist.
CONFIG_FS_LOG_LEVEL_OFF=y

# turn off VT100 colors on the console
CONFIG_SHELL_VT100_COLORS=n


# crypto / security
# Enable nordic security backend and PSA APIs
CONFIG_NRF_SECURITY=y
CONFIG_MBEDTLS_PSA_CRYPTO_C=y

# Enable TF-M for SDK v2.2.0 support with parition sizes
# set to smallest possible
CONFIG_BUILD_WITH_TFM=y
CONFIG_TFM_PROFILE_TYPE_SMALL=y
CONFIG_PM_PARTITION_SIZE_TFM=0x10000
CONFIG_PM_PARTITION_SIZE_TFM_SRAM=0x08000

# disable some TFM partitions so save memory.
# Reduces to 64KB FLASH / 32KB RAM
CONFIG_TFM_PARTITION_INITIAL_ATTESTATION=n
CONFIG_TFM_PARTITION_PLATFORM=y
CONFIG_TFM_PARTITION_PROTECTED_STORAGE=n
CONFIG_TFM_PARTITION_INTERNAL_TRUSTED_STORAGE=y

CONFIG_PSA_WANT_ALG_ECDSA=y
CONFIG_PSA_WANT_KEY_TYPE_ECC_KEY_PAIR_GENERATE=y
CONFIG_PSA_WANT_KEY_TYPE_ECC_KEY_PAIR_IMPORT=y
CONFIG_PSA_WANT_KEY_TYPE_ECC_KEY_PAIR_EXPORT=y
CONFIG_PSA_WANT_ALG_SHA_256=y

CONFIG_PSA_WANT_ALG_ECDH=y
CONFIG_PSA_WANT_ECC_SECP_R1_256=y
CONFIG_PSA_WANT_KEY_TYPE_AES=y
CONFIG_PSA_WANT_ALG_CTR=y

# disable TFM usage of UART1 since it may interfere with icapture.
# for TFM debug, re-enable this option.
CONFIG_TFM_LOG_LEVEL_SILENCE=y

# For key generation
CONFIG_PSA_WANT_GENERATE_RANDOM=y
CONFIG_BASE64=y

# for buttons & LEDs
CONFIG_DK_LIBRARY=y

# Fix for ext. FLASH per Sigurd suggestion
# at https://devzone.nordicsemi.com/f/nordic-q-a/118765/little-fs-on-external-flash-with-nrf9161dk-and-ncs-2-8-0
CONFIG_PM_OVERRIDE_EXTERNAL_DRIVER_CHECK=y

# Enable automatic request of PSM mode on attach.
# this is recommended to reduce power consumption during idle times.
CONFIG_LTE_LC_PSM_MODULE=y
CONFIG_LTE_PSM_REQ=y

# OTDOA Library
CONFIG_OTDOA_AL_LIB=y
CONFIG_OTDOA_LIB_TYPE_PROD=y
CONFIG_OTDOA_SHELL_COMMANDS=y

# OTDOA Sample Application
CONFIG_PERIODIC_EST_INTERVAL=0
