#
# Copyright (c) 2025 Nordic Semiconductor ASA
#
# SPDX-License-Identifier: LicenseRef-Nordic-5-Clause
#

# ==============================================================================
# Optimized minimal configuration for radio_loader
# ==============================================================================
# This loader only runs SYS_INIT(load_and_jump_to_firmware, EARLY, 0) which:
#   1. Copies firmware from MRAM to TCM using memcpy()
#   2. Jumps to the loaded firmware's reset handler
# No Zephyr services, threading, or drivers are needed.
#
# Memory footprint target: < 4 KB

# ==============================================================================
# Power Management
# ==============================================================================
CONFIG_PM=n
CONFIG_PM_DEVICE=n

# ==============================================================================
# Kernel - Threading Disabled
# ==============================================================================
# We never reach main() or start the scheduler, so disable all threading
CONFIG_MULTITHREADING=n
CONFIG_MAIN_STACK_SIZE=512
CONFIG_THREAD_STACK_INFO=n

# Disable kernel features that require threading/scheduler
CONFIG_EVENTS=n
CONFIG_POLL=n
CONFIG_TIMESLICING=n

# ==============================================================================
# Console, Debug, and Logging
# ==============================================================================
# No console output needed - loader jumps immediately to firmware
CONFIG_CONSOLE=n
CONFIG_UART_CONSOLE=n
CONFIG_SERIAL=n
CONFIG_PRINTK=n
CONFIG_EARLY_CONSOLE=n
CONFIG_LOG=n

# Banners and debug features
CONFIG_NCS_BOOT_BANNER=n
CONFIG_BOOT_BANNER=n
CONFIG_ERRNO=n

# ==============================================================================
# Device Drivers
# ==============================================================================
# No peripheral drivers needed - we only use memcpy and jump
CONFIG_GPIO=n
CONFIG_PINCTRL=n
CONFIG_I2C=n
CONFIG_SPI=n
CONFIG_WATCHDOG=n

# ==============================================================================
# Interrupt Management
# ==============================================================================
CONFIG_DYNAMIC_INTERRUPTS=n
CONFIG_IRQ_OFFLOAD=n
CONFIG_GEN_IRQ_VECTOR_TABLE=n
CONFIG_GEN_ISR_TABLES=n
CONFIG_GEN_SW_ISR_TABLE=n

# ==============================================================================
# Hardware Protection
# ==============================================================================
CONFIG_HW_STACK_PROTECTION=n
CONFIG_ARM_MPU=n

# ==============================================================================
# Security and Crypto
# ==============================================================================
# No crypto needed for simple memory copy operation
CONFIG_NRF_SECURITY=n
CONFIG_MBEDTLS_PSA_CRYPTO_C=n
CONFIG_PSA_CRYPTO_DRIVER_OBERON=n
CONFIG_PSA_CRYPTO=n
CONFIG_PSA_SSF_CRYPTO_CLIENT=n

# ==============================================================================
# Memory Optimization
# ==============================================================================
CONFIG_HEAP_MEM_POOL_SIZE=0
CONFIG_SYS_HEAP_RUNTIME_STATS=n

# Use nano printf for minimal footprint (only used if PRINTK somehow gets enabled)
CONFIG_CBPRINTF_NANO=y
