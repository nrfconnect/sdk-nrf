sample:
  description: Protected Storage API sample
  name: PSA Protected Storage
common:
  tags: psa
  platform_allow: nrf5340dk_nrf5340_cpuappns nrf9160dk_nrf9160ns
  harness: console
  harness_config:
    type: multi_line
    regex:
      - "TF-M Protected Storage sample started."
      - "Writing data to UID1: .*"
      - "Info on data stored in UID1:"
      - "- Size: [0-9]"
      - "- Capacity: 0x[0-9a-f]"
      - "Got expected error (PSA_ERROR_NO_PERMITTED) when writing to protected UID"

tests:
  sample.tfm.protected_storage:
    tags: tfm ci_build
