sample:
  name: Multicore Hello World
  description: |
    Hello World application that builds remote core from sources. Both cores
    print board name they were run on.

common:
  build_only: true
  sysbuild: true
  tags: ci_build

tests:
  sample.multicore.hello_world.nrf5340dk_cpuapp_cpunet:
    platform_allow:
      - nrf5340dk_nrf5340_cpuapp
    integration_platforms:
      - nrf5340dk_nrf5340_cpuapp
    extra_args:
      SB_CONF_FILE=sysbuild/nrf5340dk_nrf5340_cpunet.conf

  sample.multicore.hello_world.nrf5340dk_cpuapp_cpunet_mcuboot:
    platform_allow:
      - nrf5340dk_nrf5340_cpuapp
    integration_platforms:
      - nrf5340dk_nrf5340_cpuapp
    extra_configs:
      - CONFIG_BOOTLOADER_MCUBOOT=y
    extra_args:
      SB_CONF_FILE=sysbuild/nrf5340dk_nrf5340_cpunet.conf

  sample.multicore.hello_world.nrf54h20dk_cpuapp_cpuppr:
    platform_allow:
      - nrf54h20dk_nrf54h20_cpuapp
    integration_platforms:
      - nrf54h20dk_nrf54h20_cpuapp
    extra_args:
      SB_CONF_FILE=sysbuild/nrf54h20dk_nrf54h20_cpuppr.conf
      hello_world_SNIPPET=nordic-ppr

  sample.multicore.hello_world.nrf54h20dk_cpuapp_cpuppr_xip:
    platform_allow:
      - nrf54h20dk_nrf54h20_cpuapp
    integration_platforms:
      - nrf54h20dk_nrf54h20_cpuapp
    extra_args:
      SB_CONF_FILE=sysbuild/nrf54h20dk_nrf54h20_cpuppr_xip.conf
      hello_world_SNIPPET=nordic-ppr-xip

  sample.multicore.hello_world.nrf54h20dk_cpuapp_cpurad:
    platform_allow:
      - nrf54h20dk_nrf54h20_cpuapp
    integration_platforms:
      - nrf54h20dk_nrf54h20_cpuapp
    extra_args:
      SB_CONF_FILE=sysbuild/nrf54h20dk_nrf54h20_cpurad.conf

  sample.multicore.hello_world.nrf54h20dk_cpuapp_cpurad.power_consumption:
    # copy original configuration
    platform_allow:
      - nrf54h20dk_nrf54h20_cpuapp
    integration_platforms:
      - nrf54h20dk_nrf54h20_cpuapp
    extra_args:
      SB_CONF_FILE=sysbuild/nrf54h20dk_nrf54h20_cpurad.conf
    # to overwrite default build only
    build_only: false
    # enable pytest and power measurement
    harness: pytest
    harness_config:
      fixture: ppk_power_measure
      pytest_root:
        - "${CUSTOM_ROOT_TEST_DIR}/test_measure_power_consumption.py::test_measure_and_data_dump_power_consumption"

  sample.multicore.hello_world.nrf54h20dk_cpuapp.power_consumption:
    # copy original configuration
    platform_allow:
      - nrf54h20dk_nrf54h20_cpuapp
    integration_platforms:
      - nrf54h20dk_nrf54h20_cpuapp
    # to overwrite default build only and sysbuild
    sysbuild: false
    build_only: false
    # enable pytest and power measurement
    harness: pytest
    harness_config:
      fixture: ppk_power_measure
      pytest_root:
        - "${CUSTOM_ROOT_TEST_DIR}/test_measure_power_consumption.py::test_measure_and_data_dump_power_consumption"

  sample.multicore.hello_world.nrf54h20dk_cpuapp_cpurad_ppr.power_consumption:
    platform_allow:
      - nrf54h20dk_nrf54h20_cpuapp
    integration_platforms:
      - nrf54h20dk_nrf54h20_cpuapp
    extra_args:
      SB_CONF_FILE=sysbuild/nrf54h20dk_nrf54h20_cpurad_ppr.conf
      hello_world_SNIPPET=nordic-ppr-xip
      remote_2_DTC_OVERLAY_FILE=power_management_ppr.overlay
      remote_DTC_OVERLAY_FILE=power_management_rad.overlay
      hello_world_DTC_OVERLAY_FILE=power_management_app.overlay
    build_only: false
    # enable pytest and power measurement
    harness: pytest
    harness_config:
      fixture: ppk_power_measure
      pytest_root:
        - "${CUSTOM_ROOT_TEST_DIR}/test_measure_power_consumption.py::test_measure_and_data_dump_power_consumption"
