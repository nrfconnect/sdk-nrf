#
# Copyright (c) 2023 Nordic Semiconductor ASA
#
# SPDX-License-Identifier: LicenseRef-Nordic-5-Clause
#

# Overlay file that enables TLS for nRF70 Series builds

# MQTT TLS
CONFIG_MQTT_LIB_TLS=y
CONFIG_MQTT_HELPER_PORT=8883
CONFIG_MQTT_KEEPALIVE=30
CONFIG_MQTT_SAMPLE_TRANSPORT_THREAD_STACK_SIZE=3072

# Credentials located under <sample-dir>/src/modules/transport/credentials/ will be automatically
# provisioned prior to connecting to the server by the MQTT helper library.
CONFIG_MQTT_HELPER_SEC_TAG=955
CONFIG_MQTT_HELPER_PROVISION_CERTIFICATES=y
CONFIG_MQTT_HELPER_CERTIFICATES_FOLDER="src/modules/transport/credentials"
CONFIG_TLS_CREDENTIALS=y
CONFIG_TLS_CREDENTIALS_BACKEND_VOLATILE=y

# NET Sockets
CONFIG_NET_SOCKETS_SOCKOPT_TLS=y

# nRF Security and mbedTLS
CONFIG_NET_SOCKETS_TLS_MAX_CONTEXTS=1
CONFIG_NRF_SECURITY=y
CONFIG_MBEDTLS=y
CONFIG_MBEDTLS_ENABLE_HEAP=y
CONFIG_MBEDTLS_SSL_KEEP_PEER_CERTIFICATE=n
CONFIG_MBEDTLS_SSL_SERVER_NAME_INDICATION=y
CONFIG_MBEDTLS_RSA_C=y
CONFIG_MBEDTLS_HEAP_SIZE=60000
