# Copyright (c) 2026 Nordic Semiconductor ASA
#
# SPDX-License-Identifier: LicenseRef-Nordic-5-Clause

menuconfig OTPERF
	bool "otperf tool"
	depends on OPENTHREAD
	help
	  This option enables otperf library, which allows to generate network traffic and evaluate
	  network bandwidth in conjunction with other devices running otperf, zperf or a desktop
	  running the iperf2 utility.

if OTPERF

module = OTPERF
module-str = otperf
source "subsys/logging/Kconfig.template.log_config"

config OTPERF_SHELL
	bool "otperf shell command"
	default y
	depends on SHELL
	help
	  Enables the otperf shell interface, allowing interactive use of various otperf commands.
	  With the commands, you can send and receive UDP packets, measure throughput and latency
	  as well as analyse network performance.
	  To see the complete list of available otperf UDP commands and usage details, enter
	  "otperf udp help" in the shell.


config OTPERF_MAX_PACKET_SIZE
	int "Maximum packet size"
	range 40 65535
	default 1064
	help
	  Upper size limit for packets sent by otperf. Default allows for a 1kB
	  payload with the 40 byte iperf UDP client header.

config OTPERF_SERVER
	bool "otperf server support"
	default y
	help
	  Support running a otperf server for testing downloads from the application

config OTPERF_MAX_SESSIONS
	int "Maximum number of otperf sessions"
	depends on OTPERF_SERVER
	default 4
	help
	  Upper size limit for connections handled by otperf.

config OTPERF_UDP_REPORT_RETRANSMISSION_COUNT
	int "Maximum number of UDP upload report retransmissions"
	range 0 16
	default 4
	help
	  Maximum number of retries otperf will take to retrieve the UDP upload
	  report from the server. `0` means the report will not be requested
	  at all, which is useful for testing purposes.

config OTPERF_DEFAULT_PORT
	int "Default port used by the tool"
	default 5001
	help
	  Default port will be used when no port is specified

config OTPERF_DEFAULT_DURATION_S
	int "Default duration in seconds of the session"
	default 1
	help
	  Default duration in seconds that is used when no other value is specified

config OTPERF_DEFAULT_PACKET_SIZE
	int "Default packet size"
	default 256
	help
	  Default size of packets sent by the tool during upload
	  used when no other value is specified

config OTPERF_DEFAULT_RATE_KBPS
	int "Default data rate in Kbps"
	default 50
	help
	  Default data rate in Kbits per second used when no other value is specified

endif
