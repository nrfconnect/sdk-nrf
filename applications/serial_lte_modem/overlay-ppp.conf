#
# Copyright (c) 2023 Nordic Semiconductor ASA
#
# SPDX-License-Identifier: LicenseRef-Nordic-5-Clause
#

CONFIG_SLM_PPP=y

# When using PPP, disable commands of IP-based protocols to save flash space.
CONFIG_SLM_FTPC=n
CONFIG_SLM_TFTPC=n
CONFIG_SLM_HTTPC=n
CONFIG_SLM_MQTTC=n

# NCS modem libraries
CONFIG_PDN=y
CONFIG_AT_CMD_CUSTOM=y

CONFIG_NRF_MODEM_LIB_SHMEM_TX_SIZE=22528

# PPP UART
CONFIG_UART_1_NRF_HW_ASYNC=y
CONFIG_UART_1_NRF_HW_ASYNC_TIMER=1

# TF-M cannot have its own UART.
CONFIG_TFM_SECURE_UART_SHARE_INSTANCE=y

# Zephyr PPP support
CONFIG_NET_NATIVE=y
CONFIG_NET_L2_PPP=y
CONFIG_NET_DRIVERS=y
CONFIG_NET_PPP=y

# L2 protocol
CONFIG_NET_L2_PPP_MGMT=y
CONFIG_NET_L2_PPP_OPTION_MRU=y
CONFIG_NET_L2_PPP_OPTION_SERVE_IP=y
CONFIG_NET_L2_PPP_OPTION_SERVE_DNS=y
CONFIG_NET_L2_PPP_TIMEOUT=5000
CONFIG_NET_L2_PPP_MAX_CONFIGURE_REQ_RETRANSMITS=20

# UART driver
CONFIG_NET_PPP_ASYNC_UART=y
CONFIG_NET_PPP_UART_BUF_LEN=2048
CONFIG_NET_PPP_ASYNC_UART_TX_BUF_LEN=4096
CONFIG_NET_PPP_RINGBUF_SIZE=4096
CONFIG_NET_PPP_RX_STACK_SIZE=2048
CONFIG_NET_PPP_VERIFY_FCS=n
CONFIG_PPP_CLIENT_CLIENTSERVER=y # Windows support
CONFIG_PPP_NET_IF_NO_AUTO_START=y

# IP stack
CONFIG_NET_IPV4=y
CONFIG_NET_IPV6=y
CONFIG_NET_IP_ADDR_CHECK=n
CONFIG_NET_SOCKETS_PACKET=y

# network buffering
CONFIG_NET_BUF=y
CONFIG_NET_BUF_POOL_USAGE=y
CONFIG_NET_PKT_RX_COUNT=44
CONFIG_NET_BUF_RX_COUNT=88
CONFIG_NET_PKT_TX_COUNT=44
CONFIG_NET_BUF_TX_COUNT=88
CONFIG_NET_TC_RX_COUNT=0

# debug options
#CONFIG_LOG_PROCESS_THREAD_STACK_SIZE=4096
#CONFIG_LOG_DEFAULT_LEVEL=4
#CONFIG_NET_LOG=y
#CONFIG_NET_PKT_LOG_LEVEL_DBG=y
#CONFIG_NET_PPP_LOG_LEVEL_DBG=y
#CONFIG_NET_L2_PPP_LOG_LEVEL_DBG=y
#CONFIG_UART_LOG_LEVEL_DBG=y
