common:
  sysbuild: true
  tags:
    - b0
    - ci_tests_subsys_bootloader

tests:
  b0.w:
    platform_allow: nrf54l15dk/nrf54l15/cpuapp
    integration_platforms:
      - nrf54l15dk/nrf54l15/cpuapp
  b0.rwx:
    extra_args:
      - b0_CONFIG_SB_DISABLE_SELF_RWX=y
      - CONFIG_TEST_B0_LOCK_READS=y
    platform_allow: nrf54l15dk/nrf54l15/cpuapp
    integration_platforms:
      - nrf54l15dk/nrf54l15/cpuapp
  b0.mcuboot.w:
    extra_args:
      - b0_CONFIG_SB_DISABLE_SELF_RWX=y
      - b0_CONFIG_SB_DISABLE_NEXT_W=y
      - SB_CONFIG_BOOTLOADER_MCUBOOT=y
      - SB_CONFIG_MCUBOOT_GENERATE_DEFAULT_KMU_KEYFILE=y
      - CONFIG_TEST_B0_LOCK_REGION=4
    platform_allow: nrf54l15dk/nrf54l15/cpuapp
    integration_platforms:
      - nrf54l15dk/nrf54l15/cpuapp
  b0.mcuboot.rwx:
    extra_args:
      - b0_CONFIG_SB_DISABLE_SELF_RWX=y
      - b0_CONFIG_SB_DISABLE_NEXT_W=y
      - mcuboot_CONFIG_NCS_MCUBOOT_DISABLE_SELF_RWX=y
      - SB_CONFIG_BOOTLOADER_MCUBOOT=y
      - SB_CONFIG_MCUBOOT_GENERATE_DEFAULT_KMU_KEYFILE=y
      - CONFIG_TEST_B0_LOCK_READS=y
      - CONFIG_TEST_B0_LOCK_REGION=4
    platform_allow: nrf54l15dk/nrf54l15/cpuapp
    integration_platforms:
      - nrf54l15dk/nrf54l15/cpuapp
