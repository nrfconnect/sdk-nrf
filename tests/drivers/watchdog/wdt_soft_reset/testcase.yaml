common:
  tags:
    - drivers
    - ci_tests_drivers_watchdog
  harness: console
  timeout: 20

tests:
  drivers.watchdog.soft_reset:
    harness_config:
      type: multi_line
      ordered: true
      regex:
        - "WDT and software reset test on"
        - "RESET_PIN detected"
        - "Trigger Software reset"
        - "RESET_SOFTWARE detected"
        - "wait for WDT"
        - "RESET_WATCHDOG detected"
        - "Test completed"
    platform_allow:
      - nrf52840dk/nrf52840
      - nrf5340dk/nrf5340/cpuapp
      - nrf5340dk/nrf5340/cpunet
      - nrf54l15dk/nrf54l15/cpuapp
      - nrf54lm20dk/nrf54lm20a/cpuapp
      - nrf54ls05dk/nrf54ls05b/cpuapp
      - nrf54lv10dk/nrf54lv10a/cpuapp
    integration_platforms:
      - nrf54l15dk/nrf54l15/cpuapp
      - nrf54lm20dk/nrf54lm20a/cpuapp
      - nrf54ls05dk/nrf54ls05b/cpuapp
      - nrf54lv10dk/nrf54lv10a/cpuapp

  drivers.watchdog.soft_reset.h20:
    harness_config:
      type: multi_line
      ordered: true
      regex:
        - "WDT and software reset test on"
        - "RESET_PIN detected"
        - "Trigger Software reset"
        - "RESET_SOFTWARE detected"
        - "9000: wait for WDT"
        - "Test completed"
    platform_allow:
      - nrf54h20dk/nrf54h20/cpuapp
      - nrf54h20dk/nrf54h20/cpurad
    integration_platforms:
      - nrf54h20dk/nrf54h20/cpuapp

  drivers.watchdog.cpu_lockup_reset:
    extra_configs:
      - CONFIG_TEST_CPU_LOCKUP_RESET=y
    harness_config:
      type: multi_line
      ordered: true
      regex:
        - "WDT and cpu lockup reset test on"
        - "RESET_PIN detected"
        - "Trigger CPU Lockup reset"
        - "RESET_CPU_LOCKUP detected"
        - "wait for WDT"
        - "RESET_WATCHDOG detected"
        - "Test completed"
    platform_allow:
      - nrf52840dk/nrf52840
      - nrf5340dk/nrf5340/cpuapp
      - nrf5340dk/nrf5340/cpunet
      - nrf54l15dk/nrf54l15/cpuapp
      - nrf54lm20dk/nrf54lm20a/cpuapp
      - nrf54ls05dk/nrf54ls05b/cpuapp
      - nrf54lv10dk/nrf54lv10a/cpuapp
    integration_platforms:
      - nrf54l15dk/nrf54l15/cpuapp
      - nrf54lm20dk/nrf54lm20a/cpuapp
      - nrf54ls05dk/nrf54ls05b/cpuapp
      - nrf54lv10dk/nrf54lv10a/cpuapp

  drivers.watchdog.cpu_lockup_reset.h20:
    extra_configs:
      - CONFIG_TEST_CPU_LOCKUP_RESET=y
    harness_config:
      type: multi_line
      ordered: true
      regex:
        - "WDT and cpu lockup reset test on"
        - "RESET_PIN detected"
        - "Trigger CPU Lockup reset"
        - "RESET_CPU_LOCKUP detected"
        - "9000: wait for WDT"
        - "Test completed"
    platform_allow:
      - nrf54h20dk/nrf54h20/cpuapp
      - nrf54h20dk/nrf54h20/cpurad
    integration_platforms:
      - nrf54h20dk/nrf54h20/cpuapp
