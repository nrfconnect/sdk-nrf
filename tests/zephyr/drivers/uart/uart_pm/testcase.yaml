common:
  tags:
    - drivers
    - uart
    - ci_tests_drivers_uart
  harness: ztest
  platform_allow:
    - nrf54ls05dk/nrf54ls05b/cpuapp
    - nrf54ls05dk@0.0.0/nrf54ls05b/cpuapp
    - nrf54ls05dk@0.2.0/nrf54ls05b/cpuapp
    - nrf54lv10dk/nrf54lv10a/cpuapp
    - nrf54lv10dk@0.2.0/nrf54lv10a/cpuapp
    - nrf7120dk/nrf7120/cpuapp
  harness_config:
    fixture: gpio_loopback
  depends_on: gpio
  integration_platforms:
    - nrf54ls05dk/nrf54ls05b/cpuapp
  timeout: 30
tests:
  nrf.extended.drivers.uart.pm:
    extra_configs:
      - CONFIG_UART_INTERRUPT_DRIVEN=n
      - CONFIG_UART_ASYNC_API=n
      - CONFIG_UART_0_ENHANCED_POLL_OUT=n

  nrf.extended.drivers.uart.pm.int_driven:
    extra_configs:
      - CONFIG_UART_INTERRUPT_DRIVEN=y
      - CONFIG_UART_0_INTERRUPT_DRIVEN=y
      - CONFIG_UART_ASYNC_API=n
      - CONFIG_UART_0_ENHANCED_POLL_OUT=n

  nrf.extended.drivers.uart.pm.async:
    extra_configs:
      - CONFIG_UART_INTERRUPT_DRIVEN=n
      - CONFIG_UART_ASYNC_API=y
      - CONFIG_UART_0_ASYNC=y
      - CONFIG_UART_0_NRF_HW_ASYNC=y
      - CONFIG_UART_0_NRF_HW_ASYNC_TIMER=2
      - CONFIG_NRFX_TIMER=y
      - CONFIG_UART_0_ENHANCED_POLL_OUT=n
