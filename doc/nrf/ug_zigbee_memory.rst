.. _zigbee_memory:

Zigbee memory requirements
##########################

.. contents::
   :local:
   :depth: 2

This page provides information about the amount of flash memory and RAM that is required by :ref:`zigbee_samples`.
Use it to check if your application has enough space for a given configuration.

Samples were built using the available :ref:`nrfxlib:zboss`.
Unless stated otherwise, the default :file:`prj.conf` was used.

.. _zigbee_memory_52840:

nRF52840 DK RAM and flash memory requirements
*********************************************

The following table lists memory requirements for samples running on the :ref:`nRF52840 DK <gs_programming_board_names>` (:ref:`nrf52840dk_nrf52840 <zephyr:nrf52840dk_nrf52840>`).

+----------------------------------------------------------------+----------------------------+------------------------+-------------------------------+--------------------------+----------------------------+-----------+-----------+
| Sample                                                         | ROM ZBOSS stack + App [kB] | ROM MCUBoot bootloader | ROM ZBOSS non-volatile memory | ROM ZBOSS product config | RAM ZBOSS stack + App [kB] | Total ROM | Total RAM |
+================================================================+============================+========================+===============================+==========================+============================+===========+===========+
| :ref:`Network coordinator <zigbee_network_coordinator_sample>` | 292                        | 0                      | 32                            | 4                        | 59                         | 328       | 59        |
+----------------------------------------------------------------+----------------------------+------------------------+-------------------------------+--------------------------+----------------------------+-----------+-----------+
| :ref:`Light bulb <zigbee_light_bulb_sample>`                   | 309                        | 0                      | 32                            | 4                        | 45                         | 345       | 45        |
+----------------------------------------------------------------+----------------------------+------------------------+-------------------------------+--------------------------+----------------------------+-----------+-----------+
| :ref:`Light switch <zigbee_light_switch_sample>`               | 243                        | 0                      | 32                            | 4                        | 39                         | 279       | 39        |
+----------------------------------------------------------------+----------------------------+------------------------+-------------------------------+--------------------------+----------------------------+-----------+-----------+
| :ref:`Light switch <zigbee_light_switch_sample>` with          | 254                        | 48                     | 32                            | 4                        | 42                         | 338       | 42        |
| :ref:`lib_zigbee_fota`                                         |                            |                        |                               |                          |                            |           |           |
+----------------------------------------------------------------+----------------------------+------------------------+-------------------------------+--------------------------+----------------------------+-----------+-----------+
| :ref:`Light switch <zigbee_light_switch_sample>` with          | 358                        | 0                      | 32                            | 4                        | 57                         | 394       | 57        |
| :ref:`zigbee_light_switch_sample_nus`                          |                            |                        |                               |                          |                            |           |           |
+----------------------------------------------------------------+----------------------------+------------------------+-------------------------------+--------------------------+----------------------------+-----------+-----------+

.. _zigbee_memory_52833:

nRF52833 DK RAM and flash memory requirements
*********************************************

The following table lists memory requirements for samples running on the :ref:`nRF52833 DK <gs_programming_board_names>` (:ref:`nrf52833dk_nrf52833 <zephyr:nrf52833dk_nrf52833>`).

+----------------------------------------------------------------+--------------------------------------+------------------------+-------------------------------+--------------------------+----------------------------+-----------+-----------+
| Sample                                                         | ROM ZBOSS stack + App [kB]           | ROM MCUBoot bootloader | ROM ZBOSS non-volatile memory | ROM ZBOSS product config | RAM ZBOSS stack + App [kB] | Total ROM | Total RAM |
+================================================================+======================================+========================+===============================+==========================+============================+===========+===========+
| :ref:`Network coordinator <zigbee_network_coordinator_sample>` | 297                                  | 0                      | 16                            | 4                        | 59                         | 317       | 59        |
+----------------------------------------------------------------+--------------------------------------+------------------------+-------------------------------+--------------------------+----------------------------+-----------+-----------+
| :ref:`Light bulb <zigbee_light_bulb_sample>`                   | 314                                  | 0                      | 16                            | 4                        | 45                         | 334       | 45        |
+----------------------------------------------------------------+--------------------------------------+------------------------+-------------------------------+--------------------------+----------------------------+-----------+-----------+
| :ref:`Light switch <zigbee_light_switch_sample>`               | 247                                  | 0                      | 16                            | 4                        | 39                         | 267       | 39        |
+----------------------------------------------------------------+--------------------------------------+------------------------+-------------------------------+--------------------------+----------------------------+-----------+-----------+
| :ref:`Light switch <zigbee_light_switch_sample>` with          | n/a (insufficient flash memory size) | n/a                    | n/a                           | n/a                      | n/a                        | n/a       | n/a       |
| :ref:`lib_zigbee_fota`                                         |                                      |                        |                               |                          |                            |           |           |
+----------------------------------------------------------------+--------------------------------------+------------------------+-------------------------------+--------------------------+----------------------------+-----------+-----------+
| :ref:`Light switch <zigbee_light_switch_sample>` with          | 356                                  | 0                      | 16                            | 4                        | 55                         | 376       | 55        |
| :ref:`zigbee_light_switch_sample_nus`                          |                                      |                        |                               |                          |                            |           |           |
+----------------------------------------------------------------+--------------------------------------+------------------------+-------------------------------+--------------------------+----------------------------+-----------+-----------+

Stack memory requirements
*************************

The following table lists stack memory requirements for ``main`` and ``zboss`` threads.
These measurements were carried out with :ref:`zephyr:thread_analyzer`, using the following Kconfig options for configuration:

* For the stack memory size of the ``main`` thread - :option:`CONFIG_MAIN_STACK_SIZE`
* For the stack memory size of the ``zboss`` thread - :option:`CONFIG_ZBOSS_DEFAULT_THREAD_STACK_SIZE`

+----------------------------------------------------------------+-----------------------------+----------------------------+------------------------------+-----------------------------+
| Sample                                                         | ``main`` thread stack usage | ``main`` thread stack size | ``zboss`` thread stack usage | ``zboss`` thread stack size |
+================================================================+=============================+============================+==============================+=============================+
| :ref:`Network coordinator <zigbee_network_coordinator_sample>` | 432                         | 1024                       | 1144                         | 2048                        |
+----------------------------------------------------------------+-----------------------------+----------------------------+------------------------------+-----------------------------+
| :ref:`Light bulb <zigbee_light_bulb_sample>`                   | 592                         | 1024                       | 1144                         | 2048                        |
+----------------------------------------------------------------+-----------------------------+----------------------------+------------------------------+-----------------------------+
| :ref:`Light switch <zigbee_light_switch_sample>`               | 576                         | 1024                       | 1144                         | 2048                        |
+----------------------------------------------------------------+-----------------------------+----------------------------+------------------------------+-----------------------------+
